<!DOCTYPE html>
<html>
    <body>
        <h1>Class</h1>
        <script>           
          const condition = true; //true면 resolve false면 reject
          //promise 내용은 실행은 되었지만 결과를 아직 반환하지 않은 객체

          const promise = new Promise((resolve, reject)=>{
              if(condition){
                  resolve('scuccess');//성공리턴값 then으로 연결
              } else{
                  reject('fail');//실패리턴값 catch로 연결
              }
          });
            
          //then을 붙이면 결과를 반환하고 실행이 완료되지 않았으면 완료된 후에 then내부함수 실행
          //나중에 promise에 붙여서 받을 수 있다. 코드를 분리 할수 있다는게 장점
          promise.then((message)=>{
              console.log(message);

          })
          .catch((error)=>{
            console.log(error);
          });

          const
          
          const promise1 = Promise.resolve('success1');
          
          const promise2 = Promise.resolve('success2');

          //반복문 돌릴 수 있음
          (async () =>{

            //promise를 반복할때 사용
            for await(promise of [promise1, promise2]){
              consoel.log(pormise);
            }
          })();

          Promise.all([promise1, promise2]).then((result)=>{
            console.log(result);
          })
          .catch((error)=>{
            console.error(error);
          });

          //=>promise
          function findAndSaveUsers(Users){
            Users.findOne({})
            .then((user)=>{
              user.name = 'zero';
              return user.save();
            })
            .then((user)=>{
              return Users.findOne({gender: 'm'});
            })
            .then((user)=>{
              ///blabla..
            })
          }

          //<=방식 await을 쓸때는 함수가 async가 붙어야됨
          //await을 쓰려면 async function main() 이런식으로 만들어야한다.
          //하지만  consot result = await pormise; 이렇게 쓰면 안해도됨
          //async로 return한애들은 then으로 받아야됨
          //pormise의 문법을 간단히 만든 것
          //C#하면뭐..
          async function findAndSaveUser(Users){
            let user = await Users.findOne({});
            user.name = 'zero';
            user=await user.save();
            user=await Users.findOne({gender:'m'});
          }



       

           
        </script>
    </body>
</html>